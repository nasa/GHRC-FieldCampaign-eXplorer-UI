{"version":3,"file":"createGeometry.js","sources":["../../../../Source/WorkersES6/createGeometry.js"],"sourcesContent":["/* global require */\nimport defined from \"../Core/defined.js\";\nimport PrimitivePipeline from \"../Scene/PrimitivePipeline.js\";\nimport when from \"../ThirdParty/when.js\";\nimport createTaskProcessorWorker from \"./createTaskProcessorWorker.js\";\n\nvar moduleCache = {};\n\nfunction getModule(moduleName) {\n  var module = moduleCache[moduleName];\n  if (!defined(module)) {\n    if (typeof exports === \"object\") {\n      // Use CommonJS-style require.\n      moduleCache[module] = module = require(\"Workers/\" + moduleName);\n    } else {\n      // Use AMD-style require.\n      // in web workers, require is synchronous\n      require([\"Workers/\" + moduleName], function (f) {\n        module = f;\n        moduleCache[module] = f;\n      });\n    }\n  }\n  return module;\n}\n\nfunction createGeometry(parameters, transferableObjects) {\n  var subTasks = parameters.subTasks;\n  var length = subTasks.length;\n  var resultsOrPromises = new Array(length);\n\n  for (var i = 0; i < length; i++) {\n    var task = subTasks[i];\n    var geometry = task.geometry;\n    var moduleName = task.moduleName;\n\n    if (defined(moduleName)) {\n      var createFunction = getModule(moduleName);\n      resultsOrPromises[i] = createFunction(geometry, task.offset);\n    } else {\n      //Already created geometry\n      resultsOrPromises[i] = geometry;\n    }\n  }\n\n  return when.all(resultsOrPromises, function (results) {\n    return PrimitivePipeline.packCreateGeometryResults(\n      results,\n      transferableObjects\n    );\n  });\n}\nexport default createTaskProcessorWorker(createGeometry);\n"],"names":["moduleCache","createTaskProcessorWorker","parameters","transferableObjects","subTasks","length","resultsOrPromises","Array","i","createFunction","task","geometry","moduleName","defined","module","exports","require","f","getModule","offset","when","all","results","PrimitivePipeline","packCreateGeometryResults"],"mappings":"6kBAMA,IAAIA,EAAc,UA8CHC,EA1Bf,SAAwBC,EAAYC,GAKlC,IAJA,IAAIC,EAAWF,EAAWE,SACtBC,EAASD,EAASC,OAClBC,EAAoB,IAAIC,MAAMF,GAEzBG,EAAI,EAAGA,EAAIH,EAAQG,IAAK,CAC/B,IAKMC,EALFC,EAAON,EAASI,GAChBG,EAAWD,EAAKC,SAChBC,EAAaF,EAAKE,WAElBC,UAAQD,IACNH,EA7BV,SAAmBG,GACjB,IAAIE,EAASd,EAAYY,GAczB,OAbKC,UAAQC,KACY,iBAAZC,QAETf,EAAYc,GAAUA,EAASE,QAAQ,WAAaJ,GAIpDI,QAAQ,CAAC,WAAaJ,GAAa,SAAUK,GAE3CjB,EADAc,EAASG,GACaA,KAIrBH,EAckBI,CAAUN,GAC/BN,EAAkBE,GAAKC,EAAeE,EAAUD,EAAKS,SAGrDb,EAAkBE,GAAKG,EAI3B,OAAOS,OAAKC,IAAIf,EAAmB,SAAUgB,GAC3C,OAAOC,oBAAkBC,0BACvBF,EACAnB"}